(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-vr_goods_buy-index"],{"0394":function(a,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return n})),e.d(t,"a",(function(){return i}));var i={uniIcons:e("219f").default,uniPopup:e("cb66").default},o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"nctouch-cart-block posr pb5"},[e("v-uni-view",{staticClass:"h3"},[e("v-uni-text",{staticClass:"mobile"}),a._v("接收方式")],1),e("v-uni-view",{staticClass:"tip-con"},[a._v("虚拟订单兑换码将以短信形式发送至买家手机")]),e("v-uni-input",{staticClass:"inp-tel",attrs:{type:"number",placeholder:"请输入接收手机号码",maxlength:"11"},model:{value:a.mobile,callback:function(t){a.mobile=t},expression:"mobile"}})],1),e("v-uni-view",{staticClass:"shop_list"},[e("v-uni-view",{staticClass:"is_wrap"},[e("v-uni-view",{staticClass:"s_title"},[e("uni-icons",{staticStyle:{"vertical-align":"middle"},attrs:{type:"shop-filled",size:"22px",color:"#999"}}),e("v-uni-text",{staticStyle:{"vertical-align":"middle","padding-left":"5px"}},[a._v(a._s(a.store_info.name))])],1),e("v-uni-view",{staticClass:"weui-media-box weui-media-box_appmsg"},[e("v-uni-view",{staticClass:"weui-media-box__hd"},[e("v-uni-image",{staticClass:"weui-media-box__thumb",attrs:{src:a.goods_info.goods_image}})],1),e("v-uni-view",{staticClass:"weui-media-box__bd"},[e("v-uni-view",{staticClass:"weui-media-box__title"},[a._v(a._s(a.goods_info.goods_name))]),e("v-uni-view",{staticClass:"weui-cell weui-cell_active"},[e("v-uni-view",{staticClass:"weui-cell__hd"},[a._v("￥"+a._s(a.goods_info.goods_price))]),e("v-uni-view",{staticClass:"weui-cell__bd"}),e("v-uni-view",{staticClass:"weui-cell__ft value-box"},[e("v-uni-text",{staticClass:"minus",attrs:{"data-goods_id":a.goods_info.goods_id,"data-num":a.goods_info.quantity},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.minus_num.apply(void 0,arguments)}}},[a._v("-")]),e("v-uni-input",{attrs:{type:"number",value:a.goods_info.quantity,"data-goods_id":a.goods_info.goods_id,disabled:!0},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.changeNumInput.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"add",attrs:{"data-goods_id":a.goods_info.goods_id,"data-num":a.goods_info.quantity},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.add_num.apply(void 0,arguments)}}},[a._v("+")])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"remark_wrap"},[e("v-uni-view",{staticClass:"label"},[e("v-uni-view",{staticClass:"label_name"},[a._v("留言")]),e("v-uni-view",{staticClass:"label_value"},[e("v-uni-input",{attrs:{placeholder:"留言备注","placeholder-class":"placeholder_class"},model:{value:a.message,callback:function(t){a.message=t},expression:"message"}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"order_footer"},[e("v-uni-view",{staticClass:"weui-cell order_btns"},[e("v-uni-view",{staticClass:"weui-cell__bd"}),e("v-uni-view",{staticClass:"weui-cell__ft"},[e("v-uni-view",{staticClass:"weui-cell"},[e("v-uni-view",{staticClass:"weui-cell__bd"},[e("v-uni-view",{staticClass:"last_money"},[e("v-uni-text",[a._v("应付:")]),e("v-uni-text",{staticClass:"last_money_show"},[a._v("￥"+a._s(a.goods_info.goods_total))])],1),e("v-uni-view",{staticClass:"promotion_money"},[a._v("优惠"+a._s(a.promotion_total)+"元")])],1),e("v-uni-view",{staticClass:"weui-cell__ft"},[e("v-uni-view",{staticClass:"submit_order ok",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.buy_step2.apply(void 0,arguments)}}},[a._v("提交订单")])],1)],1)],1)],1)],1),e("uni-popup",{ref:"popup",attrs:{"background-color":"#fff"},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.popupchange.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"commodity_attr_box"},[e("v-uni-view",{staticClass:"close",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.close_popuptoggle.apply(void 0,arguments)}}},[e("uni-icons",{attrs:{color:"#333333",size:"18px",type:"closeempty"}})],1),e("v-uni-view",{staticClass:"bottom_mask_top"},[e("v-uni-view",{staticClass:"pd_amount"},[a._v("本次交易需在线支付"),e("v-uni-text",[a._v("￥"+a._s(a.order_amount))])],1)],1),e("v-uni-view",{staticClass:"inp_con"},[a.available_predeposit>0?e("v-uni-view",{staticClass:"weui-cell weui-cell_switch"},[e("v-uni-view",{staticClass:"weui-cell__bd"},[a._v("使用余额支付"),e("v-uni-text",{staticStyle:{color:"#555","font-size":"11px","padding-left":"20px"}},[a._v("(可用余额 ￥"+a._s(a.available_predeposit)+")")])],1),e("v-uni-view",{staticClass:"weui-cell__ft"},[a.pd_falg?e("v-uni-view",{staticClass:"weui-switch-cp__box cp__box_noselect cp__box_select",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.pd_open.apply(void 0,arguments)}}}):e("v-uni-view",{staticClass:"weui-switch-cp__box cp__box_noselect",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.pd_open.apply(void 0,arguments)}}})],1)],1):a._e(),a.pd_falg?e("v-uni-view",{staticClass:"weui-cell",attrs:{id:"pd_pay_box"}},[e("v-uni-view",{staticClass:"weui-cell__hd"},[e("v-uni-view",{staticClass:"weui-label"},[a._v("输入支付密码")])],1),e("v-uni-view",{staticClass:"weui-cell__bd"},[e("v-uni-input",{staticClass:"weui-input",attrs:{placeholder:"这里输入支付密码"},model:{value:a.password,callback:function(t){a.password=t},expression:"password"}})],1)],1):a._e(),e("v-uni-view",{staticClass:"nctouch-pay"},[e("v-uni-view",{staticClass:"spacing-view"},[e("v-uni-text",{staticClass:"span"},[a._v("在线支付方式")])],1),e("v-uni-view",{staticClass:"pay-sel"},[a._l(a.payment_list,(function(t,i){return[e("v-uni-view",{staticClass:"weui-cell",attrs:{"data-type":t.payment_code},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.select_payment.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"weui-cell__hd"},[e("v-uni-image",{attrs:{src:t.payment_logo}})],1),e("v-uni-view",{staticClass:"weui-cell__bd"},[a._v(a._s(t.payment_name))]),a.payment_code==t.payment_code?e("v-uni-view",{staticClass:"weui-cell__ft"},[e("v-uni-image",{attrs:{src:"/static/set_check.png"}})],1):e("v-uni-view",{staticClass:"weui-cell__ft"},[e("v-uni-image",{attrs:{src:"/static/no_check.png"}})],1)],1)]}))],2)],1)],1),e("v-uni-view",{staticClass:"pay_btn"},[e("v-uni-view",{staticClass:"btn_l",attrs:{pay_sn:a.pay_sn},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.pay.apply(void 0,arguments)}}},[a._v("确认支付")])],1)],1)],1)],1)},n=[]},"170c":function(a,t,e){"use strict";e.r(t);var i=e("0394"),o=e("974f");for(var n in o)["default"].indexOf(n)<0&&function(a){e.d(t,a,(function(){return o[a]}))}(n);e("8162");var s=e("828b"),l=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1a4790f7",null,!1,i["a"],void 0);t["default"]=l.exports},"48f0":function(a,t,e){var i=e("c86c");t=i(!1),t.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.commodity_attr_box[data-v-1a4790f7]{position:relative;width:100%;background:#fff;padding-top:%?20?%}.commodity_attr_box uni-input[data-v-1a4790f7]{background:none;border:none;display:block;height:28px;text-overflow:clip;overflow:hidden;white-space:nowrap;font-family:UICTFontTextStyleBody}.pay_btn[data-v-1a4790f7]{display:block;padding:10px 0;margin:10px 0 10px 0}.btn_l[data-v-1a4790f7]{display:inline-block;width:90%;margin:0 5%;font-size:16px;line-height:36px;text-align:center;color:#fff;background:#e33e33;border-radius:4px}\r\n/*支付弹窗*/.close[data-v-1a4790f7]{position:absolute;right:1px;top:-9px;font-size:15px;background:#fff;border-radius:50%;padding:2px;width:18px;height:18px;line-height:18px;text-align:center;color:#333;z-index:2}.bottom_mask_top[data-v-1a4790f7]{position:relative;z-index:1;display:block;padding:10px;border-bottom:solid 1px #f5f5f5}.pd_amount[data-v-1a4790f7]{display:block;padding:10px 0;text-align:center;font-size:14px;color:#333;line-height:20px}.inp_con[data-v-1a4790f7]{display:block;clear:both;background:#fff;font-size:14px;border-bottom:solid 1px #f5f5f5}.cp__box_noselect[data-v-1a4790f7]{border-color:#f5f5f5;background-color:#f5f5f5;border:1px solid #f5f5f5}.weui-switch-cp__box[data-v-1a4790f7]{display:block;position:relative;width:45px;height:25px;outline:0;border-radius:12.5px;box-sizing:border-box}.weui-switch-cp__box[data-v-1a4790f7]::before{-webkit-transform:scale(0);transform:scale(0)}.weui-switch-cp__box[data-v-1a4790f7]::before{content:" ";position:absolute;top:0;left:0;width:48px;height:23px;border-radius:11.5px;background-color:#f5f5f5}.cp__box_noselect[data-v-1a4790f7]::after{-webkit-transform:translateX(0);transform:translateX(0)}.weui-switch-cp__box[data-v-1a4790f7]::after{content:" ";position:absolute;top:0;left:0;width:23px;height:23px;border-radius:11.5px;background-color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.cp__box_select[data-v-1a4790f7]{border-color:#48cfae;background-color:#48cfae;border:1px solid #48cfae}.cp__box_select[data-v-1a4790f7]::after{-webkit-transform:translateX(20px);transform:translateX(20px)}.nctouch-pay[data-v-1a4790f7]{display:block}.nctouch-pay .spacing-view[data-v-1a4790f7]{position:relative;z-index:1;display:block;height:20px;margin:0 10px 20px 10px;border-bottom:solid #eee 1px}.nctouch-pay .spacing-view .span[data-v-1a4790f7]{position:absolute;z-index:1;bottom:-6px;left:50%;display:block;width:100px;margin-left:-50px;text-align:center;font-size:11px;line-height:12px;height:12px;background-color:#fff;color:#888}.nctouch-pay .pay-sel[data-v-1a4790f7]{display:block;font-size:0;overflow:hidden}.nctouch-pay .pay-sel .weui-cell[data-v-1a4790f7]{font-size:14px}.nctouch-pay .pay-sel .weui-cell__hd[data-v-1a4790f7]{margin-right:15px}.nctouch-pay .pay-sel .weui-cell__hd uni-image[data-v-1a4790f7]{display:block;width:23px;height:23px}.nctouch-pay .pay-sel .weui-cell__ft uni-image[data-v-1a4790f7]{display:block;width:23px;height:23px}.page[data-v-1a4790f7]{padding-bottom:60px}.posr[data-v-1a4790f7]{position:relative!important}.mt5[data-v-1a4790f7]{margin-top:10px!important}.nctouch-cart-block[data-v-1a4790f7]{background:#fff;display:block;padding-bottom:10px}.nctouch-cart-block .h3[data-v-1a4790f7]{position:absolute;z-index:1;top:8px;left:10px;display:block;width:100px;height:20px;font-size:14px;line-height:20px;color:#555}.nctouch-cart-block .h3 .mobile[data-v-1a4790f7]{display:inline-block;vertical-align:middle;width:18px;height:18px;margin-right:2px;background-position:50% 50%;background-repeat:no-repeat;background-size:70%;opacity:.7}.nctouch-cart-block .h3 .mobile[data-v-1a4790f7]{background-image:url(/static/mobile_b.png)}.nctouch-cart-block .tip-con[data-v-1a4790f7]{display:block;margin:0 15px 0 100px;padding:10px 0;text-align:right;font-size:10px;color:#e33e33;line-height:18px}.nctouch-cart-block .inp-tel[data-v-1a4790f7]{display:block;width:80%;height:24px;padding:4px;margin:2px auto 0 auto;border:solid #e33e33 1px;border-radius:4px;font-size:16px;text-align:center;line-height:24px;background-color:#fef6f7;color:#000}.shop_list[data-v-1a4790f7]{background:#fff;margin-bottom:10px}.s_title[data-v-1a4790f7]{padding:10px 0;color:#333;font-size:14px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.is_wrap[data-v-1a4790f7]{background-color:#fff;margin-top:12px;padding:0 15px}.is_wrap .weui-media-box_appmsg[data-v-1a4790f7]{padding:10px 0}.is_wrap .weui-cell_active[data-v-1a4790f7]{padding:10px 0 0 0}.is_wrap .weui-cell_active .weui-cell__hd[data-v-1a4790f7]{color:#fe5890}.remark_wrap[data-v-1a4790f7]{background-color:#fff;margin:0 15px}.remark_wrap .label[data-v-1a4790f7]{height:44px;line-height:44px;position:relative;padding-left:50px;border-top:#f5f5f5 solid 1px;font-size:14px}.remark_wrap .label .label_name[data-v-1a4790f7]{position:absolute;left:0;top:0;font-weight:400}.remark_wrap .label .label_value[data-v-1a4790f7]{width:96%;height:22px;line-height:22px;padding:11px 2%;display:block;border-top:none}.remark_wrap .label .label_value uni-input[data-v-1a4790f7]{width:100%;height:100%;display:block;border:none;background:none}.order_footer[data-v-1a4790f7]{width:100%;position:fixed;bottom:0;left:0;display:block;z-index:3}.order_footer .weui-cell[data-v-1a4790f7]{padding:0}.order_footer .order_btns[data-v-1a4790f7]{border-top:1px solid #f5f5f5;background-color:#fff;padding:5px 10px}.order_footer .last_money[data-v-1a4790f7]{padding-top:3px;text-align:right}.order_footer .last_money .last_money_show[data-v-1a4790f7]{color:#fe5890;font-size:16px}.order_footer .submit_order[data-v-1a4790f7]{padding:5px 30px;margin-left:10px;background:#f5f5f5;color:#fff;display:inline-block;text-align:center;border-radius:3px;font-size:15px}.order_footer .order_btns .ok[data-v-1a4790f7]{background:#fe5890}.order_footer .promotion_money[data-v-1a4790f7]{font-size:10px;color:#999;display:block;width:100%}.value-box[data-v-1a4790f7]{font-size:14px;border:solid 1px #f5f5f5;border-radius:4px}.value-box uni-text[data-v-1a4790f7], .value-box uni-input[data-v-1a4790f7]{display:inline-block;vertical-align:top;text-align:center;padding:0 12px;color:#333}.value-box .minus[data-v-1a4790f7]{line-height:31px;background-color:#f5f5f5;border-radius:4px 0 0 4px}.value-box uni-input[data-v-1a4790f7]{width:50px;padding-top:3px}.value-box .add[data-v-1a4790f7]{line-height:31px;background-color:#f5f5f5;border-radius:0 4px 4px 0}.payment-box[data-v-1a4790f7]{margin-top:15px}.payment-box .weui-cell[data-v-1a4790f7]{background-color:#fff;border-bottom:1px solid #f5f5f5}.payment-box .weui-cell__hd[data-v-1a4790f7]{margin-right:10px}.payment-box .weui-cell__bd[data-v-1a4790f7]{font-size:16px}.payment-box .weui-cell__bd .weui-media-box__title[data-v-1a4790f7]{font-size:16px}',""]),a.exports=t},6131:function(a,t,e){var i=e("48f0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var o=e("967d").default;o("74622c25",i,!0,{sourceMap:!1,shadowMode:!1})},8162:function(a,t,e){"use strict";var i=e("6131"),o=e.n(i);o.a},"974f":function(a,t,e){"use strict";e.r(t);var i=e("b7de"),o=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(a){e.d(t,a,(function(){return i[a]}))}(n);t["default"]=o.a},b7de:function(a,t,e){"use strict";e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("5c47"),e("2c10");var i=getApp(),o={data:function(){return{mobile:"",payment_list:{},available_predeposit:0,pd_falg:!1,password:"",payment_code:"",payment_code_num:0,order_amount:0,promotion_total:0,order_num:0,pay_sn:"",loadView:!0,cart_id:"",ifcart:0,goods_info:{},store_info:{},message:""}},onLoad:function(a){var t=decodeURIComponent(a.cart_id)||"";t?(this.ifcart=a.ifcart||0,this.cart_id=t,this.load_info()):i.globalData.util.message("参数错误","","tip")},onShow:function(a){this.load_info()},methods:{load_info:function(a){var t=this,e=t.cart_id,o=t.payment_code;i.globalData.util.request({url:"shop/shop_vr_buy/buy_step1",data:{cart_id:e,payment_code:o},showLoading:!1,success:function(a){200==a.data.state&&(t.goods_info=a.data.data.goods_info,t.store_info=a.data.data.store_info,t.available_predeposit=a.data.data.available_predeposit,t.loadView=!1)}})},minus_num:function(a){var t=a.currentTarget.dataset.num,e=a.currentTarget.dataset.goods_id;t--,t<=0&&(t=1);var i=e+"|"+t;this.cart_id=i,this.load_info()},add_num:function(a){var t=a.currentTarget.dataset.num,e=a.currentTarget.dataset.goods_id;t++;var i=e+"|"+t;this.cart_id=i,this.load_info()},changeNumInput:function(a){var t=a.currentTarget.dataset.goods_id,e=a.target.value||1;e<=0&&(e=1);var i=t+"|"+e;this.cart_id=i,this.load_info()},buy_step2:function(a){var t=this,e=t.message,o={};o.mobile=t.mobile,o.paycode=t.payment_code,o.cart_id=t.cart_id,o.ifcart=t.ifcart,o.message=e,i.globalData.util.request({url:"shop/shop_vr_buy/buy_step2",data:o,showLoading:!1,lock:!0,success:function(a){200==a.data.state&&(t.pay_sn=a.data.data.pay_sn,t.available_predeposit=a.data.data.available_predeposit,t.order_amount=t.goods_info.goods_total,t.payment_list=a.data.data.payment_list,t.popuptoggle("bottom"),t.load_info())}})},popuptoggle:function(a){this.$refs.popup.open(a)},close_popuptoggle:function(){this.$refs.popup.close()},popupchange:function(a){console.log("当前模式："+a.type+",状态："+a.show)},pd_open:function(a){var t=this.pd_falg;this.setData({pd_falg:!t})},select_payment:function(a){var t=a.currentTarget.dataset.type;this.setData({payment_code:t}),this.load_info()},pay:function(a){var t=this,o={},n=uni.getStorageSync("key")||null;o.key=n,o.pd_pay=t.pd_falg?1:0,o.password=t.password,o.pay_sn=t.pay_sn,o.payment_code=t.payment_code,o.pay_check=1,i.globalData.util.request({url:"shop/shop_vr_buy/pay",data:o,lock:!0,success:function(a){if(a.data.data.msg)a.data.data.url?i.globalData.util.message(a.data.data.msg,a.data.data.url,"success"):i.globalData.util.message(a.data.data.msg,"","success");else{var o=window.navigator.userAgent.toLowerCase();if("micromessenger"==o.match(/MicroMessenger/i)){if("wxpay_jsapi"==t.payment_code){var n=e("dfe3");n.callPay(a.data.data)}}else"wxpay_h5"==t.payment_code&&(location.href=a.data.data.mweb_url);"alipay"==t.payment_code&&(document.querySelector("body").innerHTML=a.data.msg,document.forms["alipaysubmit"].submit())}}})}}};t.default=o},dfe3:function(a,t){function e(a){a.package&&WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},(function(t){t&&"get_brand_wcpay_request:ok"==t.err_msg?uni.redirectTo({url:"/pages/payment/result?type=success&attach="+a.order_type}):uni.navigateTo({url:"/pages/payment/result?type=failed&attach="+a.order_type}),WeixinJSBridge.log(a.err_msg)}))}a.exports={callPay:function(a){"undefined"===typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e(a),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e(a)),document.attachEvent("onWeixinJSBridgeReady",e(a))):e(a)}}}}]);